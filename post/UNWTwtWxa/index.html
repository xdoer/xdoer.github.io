<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Taro è‡ªå®šä¹‰ showModal |
    æ–‡äº«æ—¥å¿—</title>
<meta name="description" content="">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="https://aiyou.life/favicon.ico?v=1639240595674">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/papercss@1.6.1/dist/paper.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://aiyou.life/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  

<!-- <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script> -->

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
    <nav class="navbar border fixed split-nav">
  <div class="nav-brand">
    <h3><a href="https://aiyou.life">æ–‡äº«æ—¥å¿—</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
      <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
        
          <li>
            
              <a href="/" class="menu">
                é¦–é¡µ
              </a>
            
          </li>
        
          <li>
            
              <a href="/archives" class="menu">
                å½’æ¡£
              </a>
            
          </li>
        
          <li>
            
              <a href="/tags" class="menu">
                æ ‡ç­¾
              </a>
            
          </li>
        
          <li>
            
              <a href="/post/about" class="menu">
                å…³äº
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div id="top" class="row site">
      <div class="sm-12 md-8 col">
        <div class="paper">
          <article class="article">
            <h1>Taro è‡ªå®šä¹‰ showModal</h1>
            <p class="article-meta">
              2021-06-26 
              <a
                href="https://aiyou.life/tag/rSf0tu2pz/"
                class="badge secondary"
              >
                React
              </a>
              
              <a
                href="https://aiyou.life/tag/TfrzxMzWY/"
                class="badge secondary"
              >
                å°ç¨‹åº
              </a>
              
              <a
                href="https://aiyou.life/tag/K1r5vpFd_/"
                class="badge "
              >
                å‰ç«¯
              </a>
              
            </p>
            
            <div class="post-content"><p>å¾®ä¿¡å°ç¨‹åºæä¾›äº†å¾ˆå¤šç±»ä¼¼ <code>wx.showModal</code>ã€<code>wx.showLoading</code> è¿™ç±» APIï¼Œè¿™ç±» API è™½ç„¶æ–¹ä¾¿ä½¿ç”¨ï¼Œä½†æ˜¯æ ·å¼ä¸‘é™‹ï¼Œå¾€å¾€ä¸æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<p>æœ‰æ²¡æœ‰åŠæ³•è®©æˆ‘ä»¬çš„è‡ªå®šä¹‰å¼¹çª—ã€loading ç­‰å¯ä»¥é€šè¿‡ç±»ä¼¼å¾®ä¿¡çš„è¿™ç§ API è¿›è¡Œéšå¿ƒæ‰€æ¬²çš„è°ƒç”¨å‘¢ï¼Ÿ</p>
<!-- more -->
<p>é¦–å…ˆæ”¾ä¸€ä¸‹æ•ˆæœå›¾:<br>
<img src="https://aiyou.life/post-images/1624694046612.gif" alt="" loading="lazy"><br>
å¯ä»¥çœ‹åˆ°åªåœ¨ Index é¡µé¢å†™äº†ä¸€ä¸ªæŒ‰é’®ï¼Œå°±å¯ä»¥è§¦å‘æ‰“å¼€å¼¹çª—ã€‚</p>
<p>æ¥ç€æ€»ç»“ä¸€ä¸‹å…¨æ–‡:</p>
<blockquote>
<ul>
<li>åˆ©ç”¨è„šæœ¬å°†æ¯ä¸ªå¼¹çª—æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªå¼¹çª—é…ç½®</li>
<li>æ ¹æ®å¼¹çª—é…ç½®ï¼Œå¼¹çª— wrapper ç»„ä»¶ map æ¯ä¸€ä¸ªå¼¹çª—</li>
<li>ä½¿ç”¨ webpack-loader å°† wrapper ç»„ä»¶æ³¨å…¥åˆ°æ¯ä¸ªé¡µé¢</li>
<li>ä½¿ç”¨ chokidar ç›‘å¬å¼¹çª—æ–‡ä»¶çš„åˆ›å»ºï¼Œè‡ªåŠ¨è¿è¡Œè„šæœ¬ï¼Œæ›´æ–°å¼¹çª—é…ç½®</li>
<li>è®¾è®¡ API å¼çš„è°ƒç”¨é£æ ¼</li>
</ul>
</blockquote>
<p>ä¸‹æ–‡æ¶‰åŠçš„æŠ€æœ¯æ ˆä¸º: Taro ReactHook TypeScriptã€‚å¯èƒ½ä¸å…·æœ‰é€šç”¨æ€§ï¼Œä½†å¦‚æœèƒ½ä¸ºæ‚¨å¸¦æ¥ä¸€äº›æ€è€ƒå’Œæ„Ÿæ‚Ÿä¹Ÿæ˜¯æå¥½çš„ã€‚</p>
<h2 id="ç›®æ ‡">ç›®æ ‡</h2>
<p>é¦–å…ˆè§‚å¯Ÿä¸€ä¸‹ç‰¹ç‚¹ï¼š</p>
<pre><code class="language-ts">wx.showModal({
  title: &quot;æç¤º&quot;,
  content: &quot;æ“ä½œä¸åˆæ³•&quot;,
});
</code></pre>
<blockquote>
<ul>
<li>1ã€API å¼è°ƒç”¨.</li>
<li>2ã€å…¨å±€æ€§.åœ¨å°ç¨‹åºä»»æ„åœ°æ–¹éƒ½å¯ä»¥è°ƒç”¨</li>
</ul>
</blockquote>
<h2 id="api-å¼çš„è°ƒç”¨">API å¼çš„è°ƒç”¨</h2>
<p>å½“è¿›è¡Œè¿™æ ·ä¸€ä¸ªè°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ®å’ŒçŠ¶æ€ï¼Œé€šè¿‡ä¸€å®šçš„æ–¹å¼ï¼Œä¼ å…¥åˆ°æŸä¸ªç»„ä»¶ä¸­ï¼Œç»„ä»¶å†è¿›è¡Œå“åº”ã€‚ä¼ é€’æ•°æ®çš„æ–¹å¼æœ‰ props ä¸ contextã€‚ä¼ é€’ props æ–¹æ¡ˆé¦–å…ˆæ’é™¤äº†ï¼Œå› ä¸ºä½ ä¸å¯èƒ½æ¯ä¸ªç»„ä»¶è¦ä¼ å…¥å¼¹çª—çš„ propsï¼Œé‚£ä¹ˆä½¿ç”¨ context æ–¹æ¡ˆå‘¢ï¼Ÿä½¿ç”¨ context éœ€è¦åœ¨åº”ç”¨é¡¶å±‚æä¾›ä¸€ä¸ª Providerï¼Œå°†æ‰€æœ‰å¼¹çª—æ•°æ®å’Œæ˜¾éšçŠ¶æ€ï¼Œä¸ä¿®æ”¹æ•°æ®çš„æ–¹æ³•ä¼ å…¥ Provider ä¸­ï¼Œåœ¨ Consumer ä¸­ map å‡ºæ‰€æœ‰å¼¹çª—æ•°æ®ï¼Œåœ¨éœ€è¦æ‰“å¼€æˆ–å…³é—­å¼¹çª—çš„åœ°æ–¹ï¼Œä½¿ç”¨ <code>this.context</code> æˆ–è€… <code>useContext</code> æ‹¿åˆ°ä¿®æ”¹æ•°æ®æ–¹æ³•ï¼Œç„¶åæ‰èƒ½æ§åˆ¶å¼¹çª—çŠ¶æ€ã€‚</p>
<p>ä¸‹é¢æä¾›äº†ä¸€ä»½ä½¿ç”¨ context æ–¹æ¡ˆçš„ä¼ªä»£ç </p>
<pre><code class="language-tsx">const ModalContext = createContext(null)

&lt;!---- app.tsx å…¥å£æ–‡ä»¶ ----&gt;
export default function (props) {
  const [config, setConfig] = useState(modals)
  return (
    &lt;ModalContext.Provider value={{config, setConfig}}&gt;
      {props.children}
    &lt;/ModalContext.Provider&gt;
  )
}

&lt;!---- wrapper.tsx å¼¹çª— wrapper ç»„ä»¶----&gt;
// è¿™é‡Œè®¾è®¡çš„æ˜¯ n å¤šä¸ª modal å®ä¾‹ï¼ŒåŸå› æ˜¯å°† loadingã€actionSheet ç­‰ç»Ÿç§°ä¸º modal.
export function Wrapper() {
  return (
    &lt;ModalContext.Consumer&gt;
      {
        ({config}) =&gt; {
          return (
            &lt;&gt;
              {
                config.map(c =&gt; {
                  return (
                    &lt;Modal data={c} /&gt;
                  )
                })
              }
            &lt;/Modal&gt;
          )
        }
      }
    &lt;/ModalContext.Consumer&gt;
  )
}

&lt;!---- index.tsx é¦–é¡µæ–‡ä»¶----&gt;
export default function () {
  const { setConfig } = useContext(ModalContext)

  return (
    &lt;View&gt;
      {/* è¿™é‡Œå°±ä¸ç»†å†™äº†ï¼ŒåŸç†å¤§å®¶å¯ä»¥çœ‹æ‡‚ */}
      &lt;View onClick={() =&gt; setConfig((d) =&gt; { name: 'a' ,visible: true, data: 1 })}&gt;æ‰“å¼€ A å¼¹çª—&lt;/View&gt;
      &lt;Wrapper /&gt;
    &lt;/View&gt;
  )
}
</code></pre>
<p>å¯¹äº wrapper ç»„ä»¶ï¼Œéœ€è¦å¼•å…¥åˆ°æ¯ä¸€ä¸ªé¡µé¢æ–‡ä»¶ï¼Œè°ƒç”¨å¼¹çª—æ—¶ä½¿ç”¨ <code>useContext</code> ä¹Ÿå¯ä»¥æ¥å—ï¼Œä½†ä¸€å®šæ³¨æ„ä¼˜åŒ–ï¼Œä»»ä½•ä¸€å¤„ <code>setConfig</code> éƒ½ä¼šå¯¼è‡´å¼•å…¥ <code>useContext(ModalContext)</code> çš„ç»„ä»¶æˆ–é¡µé¢é‡æ–°æ¸²æŸ“ã€‚</p>
<p>æ€ä¹ˆé¿å…è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<p>å¦‚æœèƒ½å°†é¡¶å±‚çš„ <code>setConfig</code> å­˜åˆ°å¤–éƒ¨ï¼Œæ¯æ¬¡ä»å¤–éƒ¨æ–‡ä»¶å¼•å…¥ setConfig æ–¹æ³•è°ƒç”¨ã€ä¸ç›´æ¥ä½¿ç”¨ useContextï¼Œå¹¶é…åˆ memo å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p>ä¼ªä»£ç å¦‚ä¸‹:</p>
<pre><code class="language-ts">&lt;!---- useStore è‡ªå®šä¹‰ hook ----&gt;
export let setModalConfig

export function useStore(initValue) {
  const [config, setConfig] = useState(initValue)
  setModalConfig = setConfig
  return [config, setConfig]
}

&lt;!---- app.tsx å…¥å£æ–‡ä»¶ ----&gt;
export default function (props) {
  const [config, setConfig] = useStore(modals)
  return (
    &lt;ModalContext.Provider value={{config, setConfig}}&gt;
      {props.children}
    &lt;/ModalContext.Provider&gt;
  )
}
</code></pre>
<p>å¦‚æœå°†æ¯ä¸€ä¸ª <code>useState</code> çš„ <code>data</code> å’Œ <code>setData</code> å­˜åˆ°å¤–éƒ¨ï¼Œå¹¶ä¸ºå…¶åˆ†é…ä¸€ä¸ªæ ‡è¯†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»æ„åœ°æ–¹æ ¹æ®æ ‡è¯†æ‹¿åˆ° useState ä¸­çš„æ•°æ®å’Œæ–¹æ³•ã€‚</p>
<p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬å°è£…äº†ä¸€å¥—ç®€å•æ˜“ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…· <a href="https://github.com/forsigner/stook">stook</a></p>
<p>ç®€æ˜“å®ç°å¦‚ä¸‹:</p>
<pre><code class="language-ts">export const stores[] = []

// å¤–éƒ¨ä¿®æ”¹ hook çŠ¶æ€
export function mutate(key, value) {
  const cacheIdx = stores.findIndex(store =&gt; store.key === key)
  stores[cacheIdx].cbs.forEach(cb =&gt; cb(value))
}

// å¤–éƒ¨è·å– hooks çŠ¶æ€
export function getState(key) {
  const cacheIdx = stores.findIndex(store =&gt; store.key === key)
  return stores[cacheIdx].value
}

export function useStore(key, initValue?: any) {
    const cache = stores.find(store =&gt; store.key === key)
    // å¯¹äºä¸€ä¸ªç›¸åŒ key çš„ useState, é¦–å…ˆå°è¯•ä½¿ç”¨ç¼“å­˜æ•°æ®åˆå§‹åŒ–
    const [state, setState] = useState(cache?.value || initValue)

    // é˜²æ­¢åŒä¸€ä¸ª setState è¢«ç¼“å­˜å¤šæ¬¡
    if (!cache?.cbs.find(cb =&gt; cb === setState)) {
      if (!cache) {
        // å¯¹äºåŒåçš„ key, valueåº”å½“æ˜¯ç›¸åŒçš„ï¼Œéœ€è¦å°†æ¯ä¸€ä¸ªä¿®æ”¹çŠ¶æ€çš„å‡½æ•°ä¿å­˜
        stores.push({ key, value: state, cbs: [setState] })
      } else {
        cache.cbs.push(setState)
      }
    }

    useEffect(() =&gt; {
      // ç»„ä»¶æˆ–é¡µé¢å¸è½½
      return () =&gt; {
        const cacheIdx = stores.findIndex(store =&gt; store.key === key)
        const idx = stores[cacheIdx]!.cbs.findIndex(cb =&gt; cb === setState)
        cache!.cbs.splice(idx, 1)
        if (!cache?.cbs.length) {
          stores.splice(cacheIdx, 1)
        }
      }
    }, [key, setState])

    return [
      state,
      function (value) {
        let newValue = value
        if (typeof value === 'function') {
          newValue = value(state)
        }
        const cache = stores.find(store =&gt; store.key === key)!
        cache.value = newValue
        cache.cbs.forEach(cb =&gt; cb(value))
      }
    ]
}
</code></pre>
<p>æ ¹æ®æˆ‘ä»¬è®¾è®¡çš„çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œé‚£ä¹ˆå¯ä»¥å®Œå…¨æ‘’å¼ƒ context çš„æ–¹æ¡ˆäº†ã€‚</p>
<pre><code class="language-tsx">&lt;!---- app.tsx å…¥å£æ–‡ä»¶ ----&gt;
export default function (props) {
  return props.children
}

&lt;!---- wrapper.tsx å¼¹çª— wrapper ç»„ä»¶----&gt;
export function Wrapper() {
  const [modalConfig] = useStore('modal', config)
  return (
    &lt;&gt;
      {
        ({ modalConfig }) =&gt; {
          return (
            &lt;&gt;
              {
                modalConfig.map(c =&gt; {
                  return (
                    &lt;Modal data={c} /&gt;
                  )
                })
              }
            &lt;/&gt;
          )
        }
      }
    &lt;/&gt;
  )
}

&lt;!---- index.tsx é¦–é¡µæ–‡ä»¶----&gt;
export default function () {
  return (
    &lt;View&gt;
      &lt;View onClick={() =&gt; mutate('modal', (d) =&gt; {})}&gt;æ‰“å¼€ A å¼¹çª—&lt;/View&gt;
      &lt;Wrapper /&gt;
    &lt;/View&gt;
  )
}
</code></pre>
<p>æœ‰äº†è¿™äº›åŸºç¡€ï¼Œé€šè¿‡ API å¼çš„è°ƒç”¨å¼¹çª—å°±å¥½å®ç°äº†å¾ˆå¤š</p>
<pre><code class="language-ts">class Service {
  openCommonModal(data) {
    mutate(&quot;modal&quot;, (config) =&gt; {
      const commonConfig = config.find(({ name }) =&gt; name === &quot;common&quot;);
      commonConfig.visible = true;
      commonConfig.data = data;
      return [...config];
    });
  }
}
export const service = new Service();
</code></pre>
<p>è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥é€šè¿‡ <code>service.openCommonModal</code> çš„æ–¹å¼æ‰“å¼€å¼¹çª—äº†.</p>
<h2 id="å…¨å±€è°ƒç”¨">å…¨å±€è°ƒç”¨</h2>
<p>å°ç¨‹åºä¸­æ²¡æœ‰åŠæ³•å®šä¹‰ä¸€ä¸ªå…¨å±€ç»„ä»¶ï¼Œåªèƒ½å°†ç»„ä»¶å¼•å…¥åˆ°æ¯ä¸€ä¸ªé¡µé¢ä¸­ã€‚å€ŸåŠ© webpack-loaderï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ¯ä¸ªé¡µé¢è‡ªåŠ¨æ³¨å…¥ç»„ä»¶çš„èƒ½åŠ›ã€‚</p>
<p>æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ª webpack-loaderï¼Œæ¥å®Œæˆè¿™æ ·çš„äº‹æƒ… <a href="https://github.com/xdoer/taro-inject-component-loader">taro-inject-component-loader</a></p>
<p>æ³¨å…¥åçš„æ¯ä¸€ä¸ªé¡µé¢ï¼Œéƒ½å¼•å…¥äº†å¼¹çª—ç»„ä»¶ï¼Œå› è€Œå¯ä»¥åœ¨ä»»æ„åœ°æ–¹è¿›è¡Œ service å¼¹çª—çš„è°ƒç”¨ã€‚</p>
<h2 id="è‡ªåŠ¨åŒ–">è‡ªåŠ¨åŒ–</h2>
<p>ä¸Šé¢æˆ‘ä»¬ä¸€ç›´ä½¿ç”¨äº†ä¸€ä¸ªå«åš config çš„ä¸œè¥¿ï¼Œconfig ç±»ä¼¼è·¯ç”±è¡¨æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ª Modal ç»„ä»¶å’Œåç§°çš„æ˜ å°„è¡¨</p>
<pre><code class="language-ts">const config = [
  {
    name: &quot;common&quot;,
    component: CommonModal,
  },
];
</code></pre>
<p>ä¸ºäº†æ–¹ä¾¿ç»´æŠ¤ï¼Œå»ºè®®å°†æ‰€æœ‰çš„ modal æ–‡ä»¶æ”¾ç½®åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<pre><code class="language-text">|---src
|----|----modals
|----|------|------common.tsx
|----|------|------loading.tsx
|----|------|------actionSheet.tsx
</code></pre>
<p>è¿™æ ·çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨è„šæœ¬å·¥å…·ï¼Œéå†è¯¥æ–‡ä»¶å¤¹ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä»½é…ç½®æ–‡ä»¶ã€‚æ•ˆæœä¸ umi çº¦å®šå¼è·¯ç”±ç±»ä¼¼ã€‚æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨ chokidar ç›‘å¬ modals æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„åˆ é™¤å’Œåˆ›å»ºï¼Œæ¥è‡ªåŠ¨æ›´æ–° config é…ç½®æ–‡ä»¶ã€‚</p>
<p>å…¶å®ä¸å…‰æ˜¯ config é…ç½®æ–‡ä»¶ã€å¦‚æœä»”ç»†è§‚å¯Ÿ service æ–‡ä»¶çš„è¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è„šæœ¬ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä»½ service æ–‡ä»¶ã€‚</p>
<p>æˆ‘ä»¬å›¢é˜Ÿè®¾è®¡å’Œå®ç°äº†ä¸€å¥—è„šæœ¬å·¥å…·æ¥å®Œæˆè¿™æ ·çš„åŠŸèƒ½ã€‚</p>
<blockquote>
<ul>
<li><a href="https://github.com/forsigner/generated">generated</a>.ä¸€ä¸ª cli å·¥å…·ï¼Œä¸»è¦ç”¨æ¥è¿è¡Œé…ç½®çš„è„šæœ¬æ–‡ä»¶</li>
<li><a href="https://github.com/xdoer/generated-plugin-taro-modal-service">generated-plugin-taro-modal-service</a>.ä½¿ç”¨äº† <a href="https://ts-morph.com/">ts-morph</a> ç”Ÿæˆå¼¹çª—é…ç½®æ–‡ä»¶ã€‚</li>
<li><a href="https://github.com/xdoer/webpack-plugin-chokidar/blob/main/README_zh.md">webpack-plugin-chokidar</a>. ç»“åˆ webpack å’Œ chokidarï¼Œä¼˜åŒ–äº† åœ¨ webpack ä¸­ä½¿ç”¨çš„ api è®¾è®¡</li>
</ul>
</blockquote>
<h2 id="ç»“è¯­">ç»“è¯­</h2>
<p>å¸Œæœ›æ­¤æ–‡èƒ½ä¸ºå¤§å®¶å¸¦æ¥å¸®åŠ©ã€‚</p>
<p>æœ¬æ–‡æ¶‰åŠåˆ°çš„å†…å®¹å’Œæ¨¡æ¿åœ¨<a href="https://github.com/xdoer/TaroTemplate">è¿™é‡Œ</a>ã€‚</p>
</div>
          </article>
          <div class="simple-share">
            <a class="share-item" href="javascript:share.qzone()">QQç©ºé—´</a>
            <a class="share-item" href="javascript:share.weibo()">å¾®åš</a>
            <a class="share-item" href="javascript:share.facebook()"
              >Facebook</a
            >
            <a class="share-item" href="javascript:share.twitter()">Twitter</a>
          </div>
        </div>
        <div class="paper" data-aos="fade-in">
          
          <div class="next-post">
            <div class="next">
              ä¸‹ä¸€ç¯‡
            </div>
            <a href="https://aiyou.life/post/iWhkaOqqO/">
              <h3 class="post-title">å†™ä¸€ä¸ªå€’è®¡æ—¶ğŸ˜¢ï¼Ÿ</h3>
            </a>
          </div>
          
        </div>
         
        <div class="paper" data-aos="fade-in">
          <div id="gitalk-container"></div>
        </div>
          
      </div>

      <div class="sm-12 md-4 col sidebar">
  <div class="paper info-container">
    <img
      src="https://aiyou.life/images/avatar.png?v=1639240595674"
      class="no-responsive avatar"
    />
    <div class="text-muted"></div>
    <div class="social-container">
       
      <a href="https://github.com/xdoer" target="_blank">
        <i class="fab fa-github"></i>
      </a>
        
      <a href="https://twitter.com/xxdoer1" target="_blank">
        <i class="fab fa-twitter"></i>
      </a>
        
      <a href="https://weibo.com/u/7407806835" target="_blank">
        <i class="fab fa-weibo"></i>
      </a>
          
      <a href="https://www.facebook.com/xxdoer" target="_blank">
        <i class="fab fa-facebook"></i>
      </a>
       
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      æœ€æ–°æ–‡ç« 
    </div>
    <div class="row">
      <ul>
         
        <li>
          <a href="https://aiyou.life/post/WTBK_yMNR/">è´¦æœ¬å¼€å‘å°è®°</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/7Ta0APQTd/">è®©ç”Ÿæ´»äº•äº•æœ‰æ¡</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/Fjnj0JDZ5/">å¯Œæ–‡æœ¬ç¼–è¾‘å™¨è½¬ä¸ºå—æ§ç»„ä»¶çš„ä¸€ç§æ€è·¯</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/zPGtmQi-5/">TS çš„ä¸€äº›é«˜çº§ç±»å‹å†™æ³•</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/QqaRhC3Gf/">Restful-API çš„ä¸€ç§åŠ¨æ€ç”Ÿæˆæ•°æ®ç±»å‹çš„æ–¹æ³•</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/SV2erlm_4/">å‡ ä¸ªDemo çœ‹æ‡‚ ESM ä¸ CommonJS å·®å¼‚</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/UNWTwtWxa/">Taro è‡ªå®šä¹‰ showModal</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/iWhkaOqqO/">å†™ä¸€ä¸ªå€’è®¡æ—¶ğŸ˜¢ï¼Ÿ</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/4XYWTWTx/">æƒ³åˆ°çš„ä¸€äº›å¾ˆå¥½çš„é¢è¯•é¢˜</a>
        </li>
          
        <li>
          <a href="https://aiyou.life/post/M4RcI3wfU/">ç”±å°è£…ä¸€ä¸ªè¯·æ±‚åº“æ‰€æƒ³åˆ°çš„</a>
        </li>
                                   
      </ul>
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      æ ‡ç­¾åˆ—è¡¨
    </div>
    <div class="row">
      
      <a
        href="https://aiyou.life/tag/df67loo-n/"
        class="badge "
      >
        ç¬”è®°
      </a>
      
      <a
        href="https://aiyou.life/tag/K1r5vpFd_/"
        class="badge "
      >
        å‰ç«¯
      </a>
      
      <a
        href="https://aiyou.life/tag/E75leUW9b/"
        class="badge secondary"
      >
        typescript
      </a>
      
      <a
        href="https://aiyou.life/tag/rSf0tu2pz/"
        class="badge "
      >
        React
      </a>
      
      <a
        href="https://aiyou.life/tag/TfrzxMzWY/"
        class="badge secondary"
      >
        å°ç¨‹åº
      </a>
      
      <a
        href="https://aiyou.life/tag/TDgBvCzI8/"
        class="badge "
      >
        javascript
      </a>
      
      <a
        href="https://aiyou.life/tag/g_6wyy_ol/"
        class="badge warning"
      >
        ç½‘ç»œ
      </a>
      
      <a
        href="https://aiyou.life/tag/jp41-NU1u/"
        class="badge secondary"
      >
        ReactNative
      </a>
      
      <a
        href="https://aiyou.life/tag/X7Cdzy-Hu/"
        class="badge warning"
      >
        åšå®¢
      </a>
      
    </div>
  </div>
  <div class="paper">
    Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> |
    <a class="rss" href="https://aiyou.life/atom.xml" target="_blank"
      >RSS</a
    >
  </div>
</div>

    </div>

    
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
<!-- <script src="//cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-bash.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-typescript.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-jsx.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-tsx.min.js"></script> -->
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">
  AOS.init()

  // hljs.initHighlightingOnLoad()

</script>

<script type="application/javascript">
  // ä¸€è¨€
  function oneWord(element) {
    if (!element) return
    const xhr = new XMLHttpRequest()
    xhr.open('get', 'https://v1.hitokoto.cn/')
    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4) {
        element.innerText = JSON.parse(xhr.responseText).hitokoto
      }
    }
    xhr.send()
  }
  oneWord(document.querySelector('.text-muted'))
</script>

<script type="application/javascript">
  // åˆ†äº«
  var SimpleShare = function (options) {
    // get share content
    options = options || {}
    var url = options.url || window.location.href
    var title = options.title || document.title
    var content = options.content || ''
    var pic = options.pic || ''

    // fix content format
    url = encodeURIComponent(url)
    title = encodeURIComponent(title)
    content = encodeURIComponent(content)
    pic = encodeURIComponent(pic)

    // share target url
    var qzone =
      'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&title={title}&pics={pic}&summary={content}'
    var weibo =
      'http://service.weibo.com/share/share.php?url={url}&title={title}&pic={pic}&searchPic=false'
    var tqq =
      'http://share.v.t.qq.com/index.php?c=share&a=index&url={url}&title={title}&appkey=801cf76d3cfc44ada52ec13114e84a96'
    var renren =
      'http://widget.renren.com/dialog/share?resourceUrl={url}&srcUrl={url}&title={title}&description={content}'
    var douban =
      'http://www.douban.com/share/service?href={url}&name={title}&text={content}&image={pic}'
    var facebook =
      'https://www.facebook.com/sharer/sharer.php?u={url}&t={title}&pic={pic}'
    var twitter = 'https://twitter.com/intent/tweet?text={title}&url={url}'
    var linkedin =
      'https://www.linkedin.com/shareArticle?title={title}&summary={content}&mini=true&url={url}&ro=true'
    var weixin = 'http://qr.topscan.com/api.php?text={url}'
    var qq =
      'http://connect.qq.com/widget/shareqq/index.html?url={url}&desc={title}&pics={pic}'

    // replace content functions
    function replaceAPI(api) {
      api = api.replace('{url}', url)
      api = api.replace('{title}', title)
      api = api.replace('{content}', content)
      api = api.replace('{pic}', pic)

      return api
    }

    // share target
    this.qzone = function () {
      window.open(replaceAPI(qzone))
    }
    this.weibo = function () {
      window.open(replaceAPI(weibo))
    }
    this.tqq = function () {
      window.open(replaceAPI(tqq))
    }
    this.renren = function () {
      window.open(replaceAPI(renren))
    }
    this.douban = function () {
      window.open(replaceAPI(douban))
    }
    this.facebook = function () {
      window.open(replaceAPI(facebook))
    }
    this.twitter = function () {
      window.open(replaceAPI(twitter))
    }
    this.linkedin = function () {
      window.open(replaceAPI(linkedin))
    }
    this.qq = function () {
      window.open(replaceAPI(qq))
    }
    this.weixin = function (callback) {
      if (!callback) {
        window.open(replaceAPI(weixin))
      } else {
        callback(replaceAPI(weixin))
      }
    }
  }
  var share = new SimpleShare()
</script>



<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
  var gitalk = new Gitalk({
    clientID: 'f9e29934c5621e13bb13',
    clientSecret: '6ca4b35e60834188ea98ca3be6fba3c21b5ad34a',
    repo: 'xdoer.github.io',
    owner: 'xdoer',
    admin: ['xdoer'],
    id: location.pathname.substring(0, 49), // Ensure uniqueness and length less than 50
    distractionFreeMode: false, // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')
</script>
  
<script>
  // ç‚¹å‡»æ–‡ç« å†…éƒ¨å›¾ç‰‡æŸ¥çœ‹å¤§å›¾
  const contentImagesEles = [...document.querySelectorAll('.post-content img')]
  const maskEle = document.querySelector('prev-mask')
  const containerEle = document.querySelector('image-container')
  const imgCloseEle = document.querySelector('img-close')
  const imgBigEle = document.querySelector('img-big')

  contentImagesEles.forEach((ele) => {
    ele.addEventListener('click', () => {
      const { currentSrc } = ele
      imgBigEle.attributes.currentSrc = currentSrc
      mask.style.display = 'block'
    })
  })

  imgCloseEle.addEventListener('click', () => {
    mask.style.display = 'none'
  })
</script>

  </body>
</html>
